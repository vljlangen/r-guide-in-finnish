<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>B RStudio ja SSH | R-opas</title>
  <meta name="description" content="B RStudio ja SSH | R-opas" />
  <meta name="generator" content="bookdown 0.41 and GitBook 2.6.7" />

  <meta property="og:title" content="B RStudio ja SSH | R-opas" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="B RStudio ja SSH | R-opas" />
  
  
  

<meta name="author" content="Ville Langén" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="versionhallinta.html"/>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<link href="libs/table1-1.0/table1_defaults.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://r-guide-in-english.netlify.app/"><i class="fa fa-language fa-fw"></i> English version<span></span></a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Alkusanat</a></li>
<li class="chapter" data-level="2" data-path="r-kieli.html"><a href="r-kieli.html"><i class="fa fa-check"></i><b>2</b> R-kieli</a></li>
<li class="chapter" data-level="3" data-path="r-markdown.html"><a href="r-markdown.html"><i class="fa fa-check"></i><b>3</b> R Markdown</a></li>
<li class="chapter" data-level="4" data-path="workflow-rllä-työskennellessä.html"><a href="workflow-rllä-työskennellessä.html"><i class="fa fa-check"></i><b>4</b> Workflow R:llä työskennellessä</a></li>
<li class="chapter" data-level="5" data-path="asennus-tietokoneelle.html"><a href="asennus-tietokoneelle.html"><i class="fa fa-check"></i><b>5</b> Asennus tietokoneelle</a>
<ul>
<li class="chapter" data-level="5.1" data-path="asennus-tietokoneelle.html"><a href="asennus-tietokoneelle.html#r-kielen-asennus"><i class="fa fa-check"></i><b>5.1</b> R-kielen asennus</a></li>
<li class="chapter" data-level="5.2" data-path="asennus-tietokoneelle.html"><a href="asennus-tietokoneelle.html#rstudion-asennus"><i class="fa fa-check"></i><b>5.2</b> RStudion asennus</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="r-skriptit.html"><a href="r-skriptit.html"><i class="fa fa-check"></i><b>6</b> R-skriptit</a>
<ul>
<li class="chapter" data-level="6.1" data-path="r-skriptit.html"><a href="r-skriptit.html#rstudion-perusnäkymä"><i class="fa fa-check"></i><b>6.1</b> RStudion perusnäkymä</a></li>
<li class="chapter" data-level="6.2" data-path="r-skriptit.html"><a href="r-skriptit.html#r-skriptin-luonti"><i class="fa fa-check"></i><b>6.2</b> R-skriptin luonti</a></li>
<li class="chapter" data-level="6.3" data-path="r-skriptit.html"><a href="r-skriptit.html#dplyr-paketin-lataus"><i class="fa fa-check"></i><b>6.3</b> dplyr-paketin lataus</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="esimerkkidatasetti.html"><a href="esimerkkidatasetti.html"><i class="fa fa-check"></i><b>7</b> Esimerkkidatasetti</a>
<ul>
<li class="chapter" data-level="7.1" data-path="esimerkkidatasetti.html"><a href="esimerkkidatasetti.html#datan-muokkaus-dplyrilla"><i class="fa fa-check"></i><b>7.1</b> Datan muokkaus dplyr:illa</a></li>
<li class="chapter" data-level="7.2" data-path="esimerkkidatasetti.html"><a href="esimerkkidatasetti.html#kertausta-dplyrista"><i class="fa fa-check"></i><b>7.2</b> Kertausta dplyr:ista</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="puutteellista-dataa.html"><a href="puutteellista-dataa.html"><i class="fa fa-check"></i><b>8</b> Puutteellista dataa?</a>
<ul>
<li class="chapter" data-level="8.1" data-path="puutteellista-dataa.html"><a href="puutteellista-dataa.html#puutteellisen-datan-poisto"><i class="fa fa-check"></i><b>8.1</b> Puutteellisen datan poisto</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="datasettien-tuhoaminen.html"><a href="datasettien-tuhoaminen.html"><i class="fa fa-check"></i><b>9</b> Datasettien tuhoaminen</a></li>
<li class="chapter" data-level="10" data-path="muunnosmuuttujat.html"><a href="muunnosmuuttujat.html"><i class="fa fa-check"></i><b>10</b> Muunnosmuuttujat</a></li>
<li class="chapter" data-level="11" data-path="kategoriset-muuttujat.html"><a href="kategoriset-muuttujat.html"><i class="fa fa-check"></i><b>11</b> Kategoriset muuttujat</a>
<ul>
<li class="chapter" data-level="11.1" data-path="kategoriset-muuttujat.html"><a href="kategoriset-muuttujat.html#as.factor-käsky"><i class="fa fa-check"></i><b>11.1</b> as.factor-käsky</a></li>
<li class="chapter" data-level="11.2" data-path="kategoriset-muuttujat.html"><a href="kategoriset-muuttujat.html#tibble"><i class="fa fa-check"></i><b>11.2</b> tibble</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="koko-valmis-esimerkkidata.html"><a href="koko-valmis-esimerkkidata.html"><i class="fa fa-check"></i><b>12</b> Koko valmis esimerkkidata</a></li>
<li class="chapter" data-level="13" data-path="r-markdownin-luonti.html"><a href="r-markdownin-luonti.html"><i class="fa fa-check"></i><b>13</b> R Markdownin luonti</a>
<ul>
<li class="chapter" data-level="13.1" data-path="r-markdownin-luonti.html"><a href="r-markdownin-luonti.html#kääntö-lopputuotokseksi"><i class="fa fa-check"></i><b>13.1</b> Kääntö lopputuotokseksi</a></li>
<li class="chapter" data-level="13.2" data-path="r-markdownin-luonti.html"><a href="r-markdownin-luonti.html#yaml-otsikko"><i class="fa fa-check"></i><b>13.2</b> YAML-otsikko</a></li>
<li class="chapter" data-level="13.3" data-path="r-markdownin-luonti.html"><a href="r-markdownin-luonti.html#r-markdownilla-kirjoittaminen"><i class="fa fa-check"></i><b>13.3</b> R Markdownilla kirjoittaminen</a></li>
<li class="chapter" data-level="13.4" data-path="r-markdownin-luonti.html"><a href="r-markdownin-luonti.html#chunkit"><i class="fa fa-check"></i><b>13.4</b> “Chunkit”</a></li>
<li class="chapter" data-level="13.5" data-path="r-markdownin-luonti.html"><a href="r-markdownin-luonti.html#ensimmäinen-chunk"><i class="fa fa-check"></i><b>13.5</b> Ensimmäinen chunk</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="analyysejä-r-markdownilla.html"><a href="analyysejä-r-markdownilla.html"><i class="fa fa-check"></i><b>14</b> Analyysejä R Markdownilla</a>
<ul>
<li class="chapter" data-level="14.1" data-path="analyysejä-r-markdownilla.html"><a href="analyysejä-r-markdownilla.html#datasetin-tarkastelu"><i class="fa fa-check"></i><b>14.1</b> Datasetin tarkastelu</a>
<ul>
<li class="chapter" data-level="14.1.1" data-path="analyysejä-r-markdownilla.html"><a href="analyysejä-r-markdownilla.html#head-komento"><i class="fa fa-check"></i><b>14.1.1</b> head-komento</a></li>
<li class="chapter" data-level="14.1.2" data-path="analyysejä-r-markdownilla.html"><a href="analyysejä-r-markdownilla.html#kable-kaunistaa"><i class="fa fa-check"></i><b>14.1.2</b> kable kaunistaa</a></li>
<li class="chapter" data-level="14.1.3" data-path="analyysejä-r-markdownilla.html"><a href="analyysejä-r-markdownilla.html#tail-komento"><i class="fa fa-check"></i><b>14.1.3</b> tail-komento</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="analyysejä-r-markdownilla.html"><a href="analyysejä-r-markdownilla.html#muuttujien-tarkastelu"><i class="fa fa-check"></i><b>14.2</b> Muuttujien tarkastelu</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="analyysejä-r-markdownilla.html"><a href="analyysejä-r-markdownilla.html#min-max-mean"><i class="fa fa-check"></i><b>14.2.1</b> min, max, mean</a></li>
<li class="chapter" data-level="14.2.2" data-path="analyysejä-r-markdownilla.html"><a href="analyysejä-r-markdownilla.html#summary"><i class="fa fa-check"></i><b>14.2.2</b> summary</a></li>
<li class="chapter" data-level="14.2.3" data-path="analyysejä-r-markdownilla.html"><a href="analyysejä-r-markdownilla.html#summarytools"><i class="fa fa-check"></i><b>14.2.3</b> summarytools</a></li>
<li class="chapter" data-level="14.2.4" data-path="analyysejä-r-markdownilla.html"><a href="analyysejä-r-markdownilla.html#questionrfreq"><i class="fa fa-check"></i><b>14.2.4</b> questionr::freq</a></li>
<li class="chapter" data-level="14.2.5" data-path="analyysejä-r-markdownilla.html"><a href="analyysejä-r-markdownilla.html#table1"><i class="fa fa-check"></i><b>14.2.5</b> table1</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="analyysejä-r-markdownilla.html"><a href="analyysejä-r-markdownilla.html#kuvaajat"><i class="fa fa-check"></i><b>14.3</b> Kuvaajat</a>
<ul>
<li class="chapter" data-level="14.3.1" data-path="analyysejä-r-markdownilla.html"><a href="analyysejä-r-markdownilla.html#plot"><i class="fa fa-check"></i><b>14.3.1</b> plot</a></li>
<li class="chapter" data-level="14.3.2" data-path="analyysejä-r-markdownilla.html"><a href="analyysejä-r-markdownilla.html#ggplot2"><i class="fa fa-check"></i><b>14.3.2</b> ggplot2</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="analyysejä-r-markdownilla.html"><a href="analyysejä-r-markdownilla.html#lineaarinen-regressio"><i class="fa fa-check"></i><b>14.4</b> Lineaarinen regressio</a>
<ul>
<li class="chapter" data-level="14.4.1" data-path="analyysejä-r-markdownilla.html"><a href="analyysejä-r-markdownilla.html#yksinkertainen-regressio"><i class="fa fa-check"></i><b>14.4.1</b> Yksinkertainen regressio</a></li>
<li class="chapter" data-level="14.4.2" data-path="analyysejä-r-markdownilla.html"><a href="analyysejä-r-markdownilla.html#tidy"><i class="fa fa-check"></i><b>14.4.2</b> tidy</a></li>
<li class="chapter" data-level="14.4.3" data-path="analyysejä-r-markdownilla.html"><a href="analyysejä-r-markdownilla.html#multippeli-regressio"><i class="fa fa-check"></i><b>14.4.3</b> Multippeli regressio</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="lopuksi.html"><a href="lopuksi.html"><i class="fa fa-check"></i><b>15</b> Lopuksi</a></li>
<li class="appendix"><span><b>Liitteet</b></span></li>
<li class="chapter" data-level="A" data-path="versionhallinta.html"><a href="versionhallinta.html"><i class="fa fa-check"></i><b>A</b> Versionhallinta</a>
<ul>
<li class="chapter" data-level="A.1" data-path="versionhallinta.html"><a href="versionhallinta.html#versionhallinta---ei-vain-guruille"><i class="fa fa-check"></i><b>A.1</b> Versionhallinta - ei vain guruille</a></li>
<li class="chapter" data-level="A.2" data-path="versionhallinta.html"><a href="versionhallinta.html#avoimista-lisensseistä"><i class="fa fa-check"></i><b>A.2</b> Avoimista lisensseistä</a></li>
<li class="chapter" data-level="A.3" data-path="versionhallinta.html"><a href="versionhallinta.html#varaston-repository-luominen-yliopiston-palvelimelle"><i class="fa fa-check"></i><b>A.3</b> Varaston (<em>repository</em>) luominen yliopiston palvelimelle</a></li>
<li class="chapter" data-level="A.4" data-path="versionhallinta.html"><a href="versionhallinta.html#SSH-avain-miten-luodaan"><i class="fa fa-check"></i><b>A.4</b> SSH-avaimen luominen</a></li>
<li class="chapter" data-level="A.5" data-path="versionhallinta.html"><a href="versionhallinta.html#varaston-käyttö-rstudiossa"><i class="fa fa-check"></i><b>A.5</b> Varaston käyttö RStudiossa</a></li>
<li class="chapter" data-level="A.6" data-path="versionhallinta.html"><a href="versionhallinta.html#yhteenveto"><i class="fa fa-check"></i><b>A.6</b> Yhteenveto</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="rstudio-ja-ssh.html"><a href="rstudio-ja-ssh.html"><i class="fa fa-check"></i><b>B</b> RStudio ja SSH</a>
<ul>
<li class="chapter" data-level="B.1" data-path="rstudio-ja-ssh.html"><a href="rstudio-ja-ssh.html#rstudion-terminaali"><i class="fa fa-check"></i><b>B.1</b> Rstudion terminaali</a></li>
<li class="chapter" data-level="B.2" data-path="rstudio-ja-ssh.html"><a href="rstudio-ja-ssh.html#ssh-avaimet"><i class="fa fa-check"></i><b>B.2</b> SSH-avaimet</a></li>
<li class="chapter" data-level="B.3" data-path="rstudio-ja-ssh.html"><a href="rstudio-ja-ssh.html#tmux"><i class="fa fa-check"></i><b>B.3</b> Tmux</a></li>
<li class="chapter" data-level="B.4" data-path="rstudio-ja-ssh.html"><a href="rstudio-ja-ssh.html#etäyhteyden-avaaminen-rstudiossa"><i class="fa fa-check"></i><b>B.4</b> Etäyhteyden avaaminen Rstudiossa</a></li>
<li class="chapter" data-level="B.5" data-path="rstudio-ja-ssh.html"><a href="rstudio-ja-ssh.html#komentojen-suorittaminen-etäyhteyden-yli"><i class="fa fa-check"></i><b>B.5</b> Komentojen suorittaminen etäyhteyden yli</a></li>
<li class="chapter" data-level="B.6" data-path="rstudio-ja-ssh.html"><a href="rstudio-ja-ssh.html#harjoitus-survival-analyysi"><i class="fa fa-check"></i><b>B.6</b> Harjoitus: survival-analyysi</a></li>
<li class="chapter" data-level="B.7" data-path="rstudio-ja-ssh.html"><a href="rstudio-ja-ssh.html#yhteenveto-1"><i class="fa fa-check"></i><b>B.7</b> Yhteenveto</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://bookdown.org/">Proudly published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R-opas</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="rstudio-ja-ssh" class="section level1 hasAnchor" number="17">
<h1><span class="header-section-number">B</span> RStudio ja SSH<a href="rstudio-ja-ssh.html#rstudio-ja-ssh" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p><em>Joonatan Palmu</em></p>
<p><br> <br> <br></p>
<p>Raskaammassa tieteellisessä laskennassa saattaa tulla tarpeelliseksi siirtyä tekemään analyysit oman kannettavan sijaan raskaalle <a href="https://en.wikipedia.org/wiki/Computer_cluster">tietokoneklusterille</a>. Tämä saattaa myös olla tarpeen, jos tutkittava aineiston saatavuutta on rajoitettu tiettyyn pilveen. Usein klusterit on toteutettu Linuxia käyttäen. Sujuvan tutkimustyön kannalta olisi kuitenkin analyysit hyödyllistä pystyä edelleen ajamaan interaktiivisesti RStudiossa omalla kannettavalla: käyttäjä siis kontrolloi prosesseja omalta kannettavaltaan, mutta järeämpi tietokoneklusteri toteuttaa ne. Tämä on usein mahdollista seuraavia ohjeita käyttäen.</p>
<div id="rstudion-terminaali" class="section level2 hasAnchor" number="17.1">
<h2><span class="header-section-number">B.1</span> Rstudion terminaali<a href="rstudio-ja-ssh.html#rstudion-terminaali" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>RStudiossa on <code>R console</code> -välilehden lisäksi <code>Terminal</code>-välilehti. Näiden kahden välilehden erona on, että RStudio avaa edeltävään R komentorivin ja jälkimmäiseen järjestelmän yleisen komentokehoitteen (engl. <em>shell),</em> joka on tässä tapauksessa yleensä nimeltään joko <em>bash</em> tai <em>zsh</em>. Yleisessä komentokehoitteessa voidaan suorittaa kaikenlaisia komentoja kuten esimerkiksi ajaa R-komentoriviä etäyhteyden yli(!).</li>
<li>Valitsemalla <code>Terminal</code>-välilehti, voidaan ssh-komennolla ottaa yhteys tietokoneklusteriin. Tässä esimerkissä käytämme Turun yliopiston Linux-serveriä.</li>
</ul>
</div>
<div id="ssh-avaimet" class="section level2 hasAnchor" number="17.2">
<h2><span class="header-section-number">B.2</span> SSH-avaimet<a href="rstudio-ja-ssh.html#ssh-avaimet" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li><p>SSH-avaimet ovat salasanaa parempi vaihtoehto tunnistautumiseen sekä käytännöllisyyden että turvallisuuden puolesta</p>
<ul>
<li><p>Oman ssh-avaimen olemassaolon voi varmistaa komennolla <code>ls ~/.ssh/id_rsa.pub</code></p></li>
<li><p>Tarvittaessa uusi ssh-avain on helppo luoda komennolla <code>ssh-keygen</code> oletusparametreja käyttäen (älä aseta salasanaa avaimelle)</p>
<ul>
<li>Edellä tämän oppaan Appendix-osuudessa on kuvattu kohta kohdalta <a href="versionhallinta.html#SSH-avain-miten-luodaan">miten SSH-avain luodaan</a>.</li>
</ul></li>
<li><p>Oman julkisen avaimen saa kerrottua palvelimelle komennolla <code>ssh-copy-id -i ~/.ssh/id_rsa.pub linux.utu.fi</code></p></li>
<li><p>Tämän jälkeen yhdeyden käyttäminen onnistuu ilman salasanojen syöttämistä</p></li>
</ul></li>
<li><p>Huom. valitettavasti eräät harvat palvelimet on konfiguroitu niin, että ne eivät hyväksy tätä hyvää tunnistautumismenetelmää</p></li>
<li><p>Jos Windowsin <em>shell</em> ei tunnista <code>ssh</code>- tai <code>ssh-keygen</code> -komentoja, täytyy Windowsin <code>Optional Features</code> -valikosta asentaa <code>OpenSSH Client</code></p></li>
</ul>
</div>
<div id="tmux" class="section level2 hasAnchor" number="17.3">
<h2><span class="header-section-number">B.3</span> Tmux<a href="rstudio-ja-ssh.html#tmux" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li><p>Linux-palvelin päättää sinne käynnistetyt prosessit pääsääntöisesti SSH-yhteyden katketessa. Yhteys katkeaa usein päivittäin koneen mennessä offline-tilaan muun muassa lounasaikaan ja kotiin lähdettäessä.</p></li>
<li><p>Oman käyttömukavuuden vuoksi kannattaa opetella käyttämään tmux-komentoa, joka ei yhteyden katketessa tuhoudu vaan menee vain nukkumaan. Tällöin voi myös jättää raskaan analyysin ajoon kotiin lähtiessä eikä oman kannettavan sulkeminen vaikuta ajon etenemiseen.</p>
<ul>
<li>Ensimmäisellä kerralla tmux käynnistetään komennolla <code>tmux</code></li>
<li>Vanhaan sessioon saa palattua komennolla <code>tmux a</code></li>
<li>Tmuxin tottelee <code>Ctrl+b</code> alkuisia pikanäppäimiä, mutta kahdella edellisellä komennolla selviää myös hyvin tutustumatta hienompiin ominaisuuksiin</li>
</ul></li>
</ul>
</div>
<div id="etäyhteyden-avaaminen-rstudiossa" class="section level2 hasAnchor" number="17.4">
<h2><span class="header-section-number">B.4</span> Etäyhteyden avaaminen Rstudiossa<a href="rstudio-ja-ssh.html#etäyhteyden-avaaminen-rstudiossa" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li><p>Kirjoitetaan <code>Terminal</code>-välilehdelle <code>ssh username@linux.utu.fi</code></p></li>
<li><p>Käynnistetään tmux joko komennolla <code>tmux</code> tai <code>tmux a</code></p>
<ul>
<li>Jos yhteys varsinaiselle palvelimelle on epävakaa, kannattaa harkita yhteyden ottamista yliopiston linux-serverin kautta, joka on aina yhteydessä verkkoon</li>
<li>Käytännössä siis lisää tähän väliin komento <code>ssh username@server</code></li>
</ul></li>
<li><p>Käynnistetään R komennolla <code>R</code></p></li>
</ul>
<div class="float">
<img src="images/rstudio-ssh_and_tmux.jpg" alt="SSH-yhteys Linux-serverille SSH-yhteyttä käyttäen" />
<div class="figcaption">SSH-yhteys Linux-serverille SSH-yhteyttä käyttäen</div>
</div>
</div>
<div id="komentojen-suorittaminen-etäyhteyden-yli" class="section level2 hasAnchor" number="17.5">
<h2><span class="header-section-number">B.5</span> Komentojen suorittaminen etäyhteyden yli<a href="rstudio-ja-ssh.html#komentojen-suorittaminen-etäyhteyden-yli" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>Kaikkien edellisten vaiheiden tarkoituksena on saada aikaan tilanne, jossa RStudiossa kirjoitettua R-koodia kyetään lähettämään yksinkertaisella pikanäppäimellä ajettavaksi etäyhteyden yli ajettuun R- konsoliin.</li>
<li>Tällainen kehitysympäristö tekee interaktiivisen ja miellyttävän R-kielen kirjoittamisen mahdolliseksi - kaikki ohjelmointihan lopulta perustuu ajatukseen kokeilla interaktiivisesti erilaisia asioita ja katsoa mitä näistä asioista seuraa.</li>
<li>Siirrytään .Rmd-tiedostossa kiinnostavalle riville ja lähetetään tämä rivi terminaaliin pikanäppäimellä <code>Ctrl+Alt+Enter</code> tai <code>Cmd+Alt+Enter</code></li>
</ul>
<div class="float">
<img src="images/rstudio-chunk_over_ssh.jpg" alt="Komennon lähettäminen terminaaliin (huomaa kursori rivillä 15)" />
<div class="figcaption">Komennon lähettäminen terminaaliin (huomaa kursori rivillä 15)</div>
</div>
</div>
<div id="harjoitus-survival-analyysi" class="section level2 hasAnchor" number="17.6">
<h2><span class="header-section-number">B.6</span> Harjoitus: survival-analyysi<a href="rstudio-ja-ssh.html#harjoitus-survival-analyysi" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Teemme seuraavaksi harjoituksena survival-analyysin kuvitteellisesta 2 miljoonan tutkittavan aineistosta. Katsomme, onko sukupuolella vaikutusta survival-tuloksiin.</p>
<p>Lataamme ensin survival-paketin sessioomme käskyllä:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="rstudio-ja-ssh.html#cb53-1" tabindex="-1"></a><span class="fu">library</span>(survival)</span></code></pre></div>
<p>Tämän jälkeen luomme kuvitteellisen datan seuraavilla käskyillä:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="rstudio-ja-ssh.html#cb54-1" tabindex="-1"></a>testidatamme <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">id=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">2000000</span>,</span>
<span id="cb54-2"><a href="rstudio-ja-ssh.html#cb54-2" tabindex="-1"></a><span class="at">gender=</span><span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="dv">2000000</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>),</span>
<span id="cb54-3"><a href="rstudio-ja-ssh.html#cb54-3" tabindex="-1"></a><span class="at">time=</span><span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">100</span>, <span class="dv">2000000</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>),</span>
<span id="cb54-4"><a href="rstudio-ja-ssh.html#cb54-4" tabindex="-1"></a><span class="at">status=</span><span class="fu">sample</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>, <span class="dv">2000000</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>))</span>
<span id="cb54-5"><a href="rstudio-ja-ssh.html#cb54-5" tabindex="-1"></a>testidatamme<span class="sc">$</span>censored <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">-</span>testidatamme<span class="sc">$</span>status</span></code></pre></div>
<p>Survival-analyysin teemme copxph-komennolla. Otamme muistiin systeemin ajan jälkeen ja ennen analyysin ja tulostamme niiden erotuksen, joka kertoo analyysiin kuluneen ajan. Kaikki tämä tapahtuu seuraavilla käskyillä:</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="rstudio-ja-ssh.html#cb55-1" tabindex="-1"></a>start_time <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb55-2"><a href="rstudio-ja-ssh.html#cb55-2" tabindex="-1"></a>mallimme <span class="ot">&lt;-</span> <span class="fu">coxph</span>(<span class="fu">Surv</span>(time, status) <span class="sc">~</span> gender, <span class="at">data =</span> testidatamme)</span>
<span id="cb55-3"><a href="rstudio-ja-ssh.html#cb55-3" tabindex="-1"></a><span class="fu">summary</span>(mallimme)</span></code></pre></div>
<pre><code>## Call:
## coxph(formula = Surv(time, status) ~ gender, data = testidatamme)
## 
##   n= 2000000, number of events= 1e+06 
## 
##             coef exp(coef)  se(coef)     z Pr(&gt;|z|)
## gender 8.911e-05 1.000e+00 2.000e-03 0.045    0.964
## 
##        exp(coef) exp(-coef) lower .95 upper .95
## gender         1     0.9999    0.9962     1.004
## 
## Concordance= 0.5  (se = 0 )
## Likelihood ratio test= 0  on 1 df,   p=1
## Wald test            = 0  on 1 df,   p=1
## Score (logrank) test = 0  on 1 df,   p=1</code></pre>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="rstudio-ja-ssh.html#cb57-1" tabindex="-1"></a>end_time <span class="ot">&lt;-</span> <span class="fu">Sys.time</span>()</span>
<span id="cb57-2"><a href="rstudio-ja-ssh.html#cb57-2" tabindex="-1"></a>end_time <span class="sc">-</span> start_time</span></code></pre></div>
<pre><code>## Time difference of 1.675455 secs</code></pre>
<p>Mallin tuloksista voimme ensinnäkin nähdä, että sukupuolella ei ollut vaikutusta päätetapahtumaan, koska kaikki data oli kuvitteellista ja umpimähkäistä. Tulosten alla näemme, että prosessiin kului allekirjoittaneen tietokoneella seuraava määrä sekunteja:</p>
<pre><code>## Time difference of 1.675455 secs</code></pre>
<p>Voimme vertailun vuoksi ajaa samat analyysit Turun yliopiston Linux-serverillä seuraavasti.</p>
<p>Kirjoita terminaaliin <code>ssh käyttäjänimesi@linux.utu.fi</code> ja paina enteriä:</p>
<p><img src="images/linux1.jpg" /></p>
<p><br></p>
<p>Kirjoita tämän jälkeen terminaaliin <code>R</code> ja paina enteriä:</p>
<p><img src="images/linux2.jpg" /></p>
<p><br></p>
<p>Aja yllä mainitut 3 koodi-chunkia seuraavasti: paina kunkin käskyn kohdalla <code>Ctrl+Alt+Enter</code> Windowsissa tai <code>Cmd+Alt+Enter</code> Macissä. Jos koodi jakaantuu usealle riville, maalaa ensin kaikki kyseisen koodi-chunkin rivit ja paina sitten vasta edeltävässä virkkeessä mainittu kirjainyhdistelmä:</p>
<p><img src="images/linux3.gif" /></p>
<p><br></p>
<p>Näemme, että sukupuoli ei vaikuttanut Linux-serverinkään tekemässä analyysissä tulokseen, koska kaikki data oli tosiaan umpimähkäistä (huom. omat tuloksesi voivat poiketa minimaalisesti tässä näytetyistä, koska satunnainen data luodaan uudelleen joka ajossa tässä harjoituksessa):</p>
<p><img src="images/linux4.jpg" /></p>
<p>Lisäksi voimme nähdä, ettei yliopiston Linux-serveri tässä esimerkissä suoriutunut allekirjoittaneen kannettavaa tietokonetta kummoisemmin. Mutta joka tapauksessa tilastoanalyysien taakkaa voi tällä metodilla jakaa oman koneensa ja etäkoneen välillä.</p>
</div>
<div id="yhteenveto-1" class="section level2 hasAnchor" number="17.7">
<h2><span class="header-section-number">B.7</span> Yhteenveto<a href="rstudio-ja-ssh.html#yhteenveto-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li><p>Pyri saamaan R-kielen kehityksessä aikaan tilanne, jossa voit ajaa nopeasti ja interaktiivisesti erilaisia komentoja ja katsoa mitä näistä komennoista seuraa</p>
<ul>
<li>Ota esimerkiksi suuresta data framesta vain osajoukko raskaaseen vaiheeseen kunnes koodipätkä toimii</li>
</ul></li>
<li><p>Tällaisen kehitysympäristön saaminen aikaan on äärimmäisen tärkeää ja siihen on hyvä pyytää tarvittaessa apua (ei ole järkevää olla satoja tunteja tehoton)</p></li>
<li><p>Kannattaa pitää silmät auki vielä parempien vaihtoehtojen löytämiseksi (esim. Visual Studio Code tai Jupyter-notebookit)</p></li>
</ul>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="versionhallinta.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection",
"scroll_highlight": true
}
});
});
</script>

</body>

</html>
